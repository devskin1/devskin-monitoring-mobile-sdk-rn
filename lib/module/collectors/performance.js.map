{"version":3,"names":["PerformanceCollector","sessionId","appStartTime","screenTimings","Map","frameMonitorId","memoryMonitorId","metrics","constructor","config","transport","start","performance","enabled","trackAppStartTime","startFrameMonitor","startMemoryMonitor","debug","console","log","stop","clearInterval","setSessionId","markAppReady","coldStartTime","Date","now","sendPerformanceMetric","metricName","value","timestamp","toISOString","startScreenRender","screenName","trackScreenRenderTime","set","startTime","endScreenRender","timing","get","renderTime","screenRenderTime","threshold","slowRenderThreshold","delete","markInteractive","tti","timeToInteractive","reportMetric","name","context","getMetrics","frameCount","lastTime","SAMPLE_INTERVAL","setInterval","elapsed","fps","Math","round","frameRate","memory","memoryUsage","usedJSHeapSize","jsHeapSizeLimit","limit","total","totalJSHeapSize"],"sourceRoot":"../../../src","sources":["collectors/performance.ts"],"mappings":"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","ignoreList":[]}
