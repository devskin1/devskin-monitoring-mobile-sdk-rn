{"version":3,"names":["HeatmapCollector","_sessionId","_anonymousId","currentScreen","screenWidth","screenHeight","touchQueue","scrollQueue","maxScrollDepth","Map","scrollStartY","touchStartTime","touchStartPoint","longPressTimeout","LONG_PRESS_DURATION","SWIPE_THRESHOLD","SWIPE_VELOCITY_THRESHOLD","flushInterval","FLUSH_INTERVAL","MAX_QUEUE_SIZE","constructor","config","transport","start","heatmapOptions","enabled","setInterval","flush","debug","console","log","stop","clearInterval","setSessionId","sessionId","setAnonymousId","anonymousId","setCurrentScreen","screenName","set","setScreenDimensions","width","height","onTouchStart","x","y","force","trackTouches","Date","now","timestamp","setTimeout","recordTouch","duration","onTouchEnd","clearTimeout","dx","dy","distance","Math","sqrt","velocity","direction","getSwipeDirection","endX","endY","onTouchMove","_x","_y","onScroll","scrollY","contentHeight","viewportHeight","trackScrolls","maxScrollY","scrollDepth","min","round","previousMax","get","scrollData","toISOString","push","length","onPinch","scale","trackGestures","recordElementTouch","elementType","elementId","elementLabel","forEach","touch","sendTouchData","scroll","sendScrollData","type","extra","sampling","touchSampling","random","touchData","relativeX","relativeY","absDx","abs","absDy"],"sourceRoot":"../../../src","sources":["collectors/heatmap.ts"],"mappings":"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","ignoreList":[]}
