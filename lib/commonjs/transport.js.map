{"version":3,"names":["MobileTransport","queue","flushInterval","maxQueueSize","flushIntervalMs","maxRetries","sessionId","_isOnline","_offlineQueue","constructor","config","apiUrl","startPeriodicFlush","setupNetworkListener","setSessionId","startSession","session","sendToBackend","updateSession","data","sendEvent","event","enqueue","sendEventBatch","events","identifyUser","user","sendScreenView","screenView","sendError","error","catch","sendNetworkRequest","request","sendPerformanceMetric","metric","sendTouchData","touch","sendScrollData","scroll","type","flush","length","items","grouped","forEach","item","push","promises","Object","entries","map","dataArray","endpoint","getEndpointForType","heatmaps","apiKey","appId","originalItem","find","i","retryCount","Promise","allSettled","debug","console","log","destroy","clearInterval","enrichedData","applicationId","platform","timestamp","Date","now","setInterval","method","url","payload","environment","release","appVersion","beforeSend","processed","response","fetch","headers","body","JSON","stringify","ok","errorText","text","Error","status","exports"],"sourceRoot":"../../src","sources":["transport.ts"],"mappings":"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","ignoreList":[]}
