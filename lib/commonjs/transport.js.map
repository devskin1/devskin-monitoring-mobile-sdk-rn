{"version":3,"names":["MobileTransport","queue","flushInterval","maxQueueSize","flushIntervalMs","maxRetries","sessionId","_isOnline","_offlineQueue","constructor","config","apiUrl","startPeriodicFlush","setupNetworkListener","setSessionId","startSession","session","sendToBackend","updateSession","data","sendEvent","event","enqueue","sendEventBatch","events","identifyUser","user","sendScreenView","screenView","sendError","error","catch","sendNetworkRequest","request","sendPerformanceMetric","metric","sendTouchData","touch","sendScrollData","scroll","type","sendScreenshot","screenshot","session_id","page_url","screenName","width","height","timestamp","sendRecordingEvents","length","Date","toISOString","flush","items","grouped","forEach","item","push","promises","Object","entries","map","dataArray","endpoint","getEndpointForType","heatmaps","apiKey","appId","originalItem","find","i","retryCount","Promise","allSettled","debug","console","log","destroy","clearInterval","enrichedData","applicationId","platform","now","setInterval","method","url","payload","environment","release","appVersion","beforeSend","processed","response","fetch","headers","body","JSON","stringify","ok","errorText","text","Error","status","exports"],"sourceRoot":"../../src","sources":["transport.ts"],"mappings":"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","ignoreList":[]}
